---
layout: post
title: jvm垃圾回收
keywords: java
categories : [Java]
tags : [Java]
---

### 垃圾回收（GC）小结（部分文字摘自Thing in Java）
最近开始学习jvm垃圾回收相关知识，大致做以下总结，并记录下不太懂得点

* 对象可能不被垃圾回收
* 垃圾回收不等于“析构”（没接触过c++），这个概念不懂
* 垃圾回收只与内存有关

PS：如果java虚拟机（JVM）并未面临内存耗尽的情形，是不会浪费时间去执行垃圾回收以恢复内存的。

#### 对象什么时候符合垃圾回收的条件

* 所有实例都没有活动线程访问（相当于引用计数为零）
* 没有被其他任何实例访问的循环引用实例

#### Java有四种不同的引用类型

判断实例是否符合垃圾收集的条件都依赖于它的引用类型（对这些引用不是很理解）

* 强引用	
强引用是使用最普遍的引用。如果一个对象具有强引用，则垃圾回收器绝不会回收它。当内存不足时，jvm宁愿抛出OutOfMemoryError错误，使程序异常终止，也不会靠随意回收具有强引用的对象来解决内存不足的问题。
ps:强引用即为平时A a = new A();

* 软引用
如果一个对象具有软引用，则内存空间足够，垃圾回收器就不会回收它；如果内存空间不足了，就会回收这些对象的存在。只要垃圾回收器没有回收它，该对象就可以被程序使用。软引用可以和一个引用队列（ReferenceQueue）联合使用，如果软引用所引用的对象被垃圾回收器回收，Java虚拟机就会把这个软引用加入到与之关联的引用队列中。

* 弱引用
弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。在垃圾回收器线程扫描它所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程，因此不一定会很快发现那些只具有弱引用的对象。弱引用可以和一个引用队列（ReferenceQueue）联合使用，如果弱引用所引用的对象被垃圾回收，Java虚拟机就会把这个弱引用加入到与之关联的引用队列中。

* 虚引用
“虚引用”顾名思义，就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收器回收。虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列 （ReferenceQueue）联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之 关联的引用队列中。

**文章部分内容摘自以下博客**

[http://blog.csdn.net/coding_or_coded/article/details/6603549](http://blog.csdn.net/coding_or_coded/article/details/6603549)

待续...
